(self.modernJsonp=self.modernJsonp||[]).push([["67529"],{351222:function(e,t,n){n.d(t,{Pw:()=>r,SB:()=>i,ZP:()=>o,x9:()=>a});let r=80,i=55,a=e=>"phone"===e?i:r;function o(e,t){return t?0:a(e)}},473304:function(e,t,n){n.d(t,{Z:()=>p});var r=n(281098),i=n(667294),a=n(20256),o=n(937805),s=n(667835),l=n(461951),d=n(816358),u=n(516114),c=n(785893);function p({children:e,footerConfig:t,headerConfig:n,height:p,hideOnScroll:m,hideOnScrollState:{isHidden:f,updateHiddenState:g},isFooterHidden:h,noPadding:E,paddingX:_,paddingY:y=u.og,type:A,zIndex:S}){let T,v;(0,r.Z)("FixedContent","/app/packages/layout/FixedContent.tsx");let{headerLimitedOverflow:I,ignoreObstructions:w,zIndexForGestaltBug:b}=n||{},{appUpsellFooterConfig:R,footerInLego:C,navFooterConfig:O}=t||{},N=!!R,P="header"===A?"top":"bottom",L=(0,s.vs)(),{mWebCloseupRedesignEnabled:M}=(0,o.Z)(),Z=(0,i.useRef)(null),x=(0,i.useRef)(null);(0,i.useEffect)(()=>{try{if(!w){let e=Z.current;x.current=I&&e&&Array.isArray(e.children)?e.children[0]:e,x.current instanceof HTMLElement&&d.Z.addObstruction(P,x.current)}}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}return()=>{!w&&x.current instanceof HTMLElement&&d.Z.removeObstruction(P,x.current)}},[w,I,P,L]);let B="top"===P?"relative":"fixed",D=E?0:y,H=(p??u.R$)+(n?.overrideTop||0),k=m||O?{transition:C||M?"transform 300ms ease-in-out, opacity 300ms ease-in-out":"transform 200ms linear",...f||h?{transform:`translateY(${"top"===P?-H:H}px)`,opacity:C||M?0:1}:Object.freeze({})}:{},$=2*!("relative"!==B||n?.noGutter),U=$?-$:0,G=L?s.k7:"rgba(255,255,255,.95)";L&&("header"===A?T=-1:v=-1);let F=C?N?void 0:p??u.R$:"100%",j=C?u.KJ:void 0,z=n?.isTranslucent&&G||L?G:l.Wmm,V=n?.isTransparentBackground&&l.Wyp?l.Wyp:z,Y=(0,i.useMemo)(()=>({height:"footer"===A&&M?`calc(${F} + env(safe-area-inset-bottom))`:F,...M&&"footer"===A?{paddingBottom:`calc(env(safe-area-inset-bottom) + ${4*(D||0)}px)`}:Object.freeze({})}),[M,F,A,D]);return(0,c.jsx)(a.xu,{ref:Z,bottom:"footer"===A,dangerouslySetInlineStyle:{__style:{top:T,bottomStyle:v,...!S||b?{zIndex:b||1}:Object.freeze({}),...I?{background:"transparent",overflow:"hidden",paddingBottom:u.UB,marginBottom:-u.UB,pointerEvents:"none"}:Object.freeze({}),...n?.hasBorder?{borderBottom:u.dS}:Object.freeze({}),...t?.hasTopShadow?{boxShadow:"0 -2px 4px 1px rgba(0, 0, 0, 0.08)"}:Object.freeze({}),...k}},"data-test-id":A,display:N?"flex":void 0,height:p&&!C?p:void 0,left:!0,marginEnd:C?"auto":U,marginStart:C?"auto":U,onTransitionEnd:()=>{(m||O)&&x.current&&(f||h?d.Z.removeObstruction(P,x.current):d.Z.addObstruction(P,x.current))},position:B,right:!0,top:"header"===A,width:C||"fixed"!==B?void 0:"100%",zIndex:b?void 0:S,children:(0,c.jsx)(a.xu,{alignItems:t?.alignCenter?"center":void 0,dangerouslySetInlineStyle:{__style:{backgroundColor:V,...Y,boxShadow:M&&"footer"===A?`0 10px 0 0 ${V}, ${u.KJ}`:j,marginBottom:C&&!O?.docked?16:void 0,...I?{pointerEvents:"auto"}:Object.freeze({}),...n?.useRoundedCorners?{zIndex:5,borderTopRightRadius:17,borderTopLeftRadius:17,borderBottomRightRadius:0,borderBottomLeftRadius:0}:Object.freeze({})}},display:C||t?.alignCenter?"flex":void 0,marginEnd:C?"auto":void 0,marginStart:C?"auto":void 0,paddingX:_||4*("footer"===A&&!E)+$,paddingY:D,position:"relative",rounding:C&&!O?.docked?"pill":void 0,width:O?O.footerWidth:N?void 0:"100%",children:"function"==typeof e?e({updateHiddenState:g}):e})})}},588367:function(e,t,n){n.r(t),n.d(t,{default:()=>d});var r=n(281098),i=n(20256),a=n(516114),o=n(473304),s=n(211887),l=n(785893);function d({hasBorder:e,headerLimitedOverflow:t,ignoreObstructions:n,isTranslucent:d,isTransparentBackground:u,noGutter:c,overrideTop:p,useRoundedCorners:m,zIndexForGestaltBug:f,...g}){(0,r.Z)("FixedHeader","/app/packages/layout/FixedHeader.tsx");let{noPadding:h,paddingY:E=a.og,zIndex:_}=g;return(0,l.jsx)(i.Le,{height:t?a.LV+2*(h?0:E)*4:void 0,top:p||0,zIndex:_||void 0,children:(0,l.jsx)(s.Z,{hideOnScroll:g.hideOnScroll,children:r=>(0,l.jsx)(o.Z,{...g,headerConfig:{isTranslucent:d,isTransparentBackground:u,headerLimitedOverflow:t,hasBorder:e,ignoreObstructions:n,noGutter:c,overrideTop:p,zIndexForGestaltBug:f,useRoundedCorners:m},hideOnScrollState:r,type:"header"})})})}},211887:function(e,t,n){n.d(t,{Z:()=>o});var r=n(667294),i=n(159527);function a(e,t,n){var r;return(t="symbol"==typeof(r=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?r:r+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o extends r.Component{constructor(...e){super(...e),a(this,"state",{isHidden:!!this.props.appUpsellFooterConfig||!!this.props.navFooterConfig?.isDockedNavOnPlp}),a(this,"lastScrollPos",0),a(this,"updateHiddenState",e=>{this.reqAnimationId=window.requestAnimationFrame(()=>{this.setState({isHidden:e})})}),a(this,"handleScroll",(0,i.Z)(()=>{let{appUpsellFooterConfig:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state,r=window.scrollY,i=r-this.lastScrollPos,a="none",{scrollHeight:o,clientHeight:s}=document.documentElement||{};Number.isNaN(o)||Number.isNaN(s)||(a=i<0?r<=Math.abs((window.scrollMinY||0)+Math.max(i,20))?"start":"none":r>=(window.scrollMaxY||o-s)-Math.max(i,20)?"end":"none");let l=55*!t?.isModal;e?i>20&&n&&r>=500?e.shouldShowAfterScroll()&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20&&!n||r<=l)&&(this.updateHiddenState(!0),t?.onScroll(!0)):this.props.navFooterConfig?.isDockedNavOnPlp?"start"===a&&!n||r<=l?(this.updateHiddenState(!0),t?.onScroll(!0)):(r>l||"end"===a)&&n&&(this.updateHiddenState(!1),t?.onScroll(!1)):(i<-20||"start"===a)&&n||r<=l?(this.updateHiddenState(!1),t?.onScroll(!1)):(i>20||"end"===a)&&!n&&(this.updateHiddenState(!0),t?.onScroll(!0)),this.lastScrollPos=r},30))}componentDidMount(){try{(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.addEventListener("scroll",this.handleScroll)}catch(e){window.console.error(e),window.console.error('Can only register impression obstructions for type "HTMLElement"')}}componentWillUnmount(){(this.props.hideOnScroll||this.props.navFooterConfig?.isDockedNavOnPlp)&&window.removeEventListener("scroll",this.handleScroll),this.reqAnimationId&&(window.cancelAnimationFrame(this.reqAnimationId),this.reqAnimationId=null)}componentDidUpdate(e){!e.hideOnScroll&&this.props.hideOnScroll||!e.navFooterConfig?.isDockedNavOnPlp&&this.props.navFooterConfig?.isDockedNavOnPlp?(this.updateHiddenState(!0),window.addEventListener("scroll",this.handleScroll)):(e.hideOnScroll&&!this.props.hideOnScroll||e.navFooterConfig?.isDockedNavOnPlp&&!this.props.navFooterConfig?.isDockedNavOnPlp)&&(this.updateHiddenState(!1),window.removeEventListener("scroll",this.handleScroll))}render(){let{children:e,navFooterConfig:t}=this.props,{isHidden:n}=this.state;return e({isHidden:!t?.forceShow&&n,updateHiddenState:this.updateHiddenState})}}},55543:function(e,t,n){n.d(t,{Z:()=>i});var r=n(603316);function i(e,t){return new Promise((n,i)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if("FACEBOOK"===t)if(window.FB)n();else{let t=setInterval(()=>{window.FB||20===e?(clearInterval(t),n()):(e+=1,(0,r.nP)(`mweb.loadScript.facebook.tries_${e}`,{sampleRate:.01}))},100)}else if("GSI"===t)if(window.google)n();else{let t=setInterval(()=>{window.google||20===e?(clearInterval(t),n()):(e+=1,(0,r.nP)(`mweb.loadScript.gsi.tries_${e}`,{sampleRate:.01}))},100)}else n()}else{let t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",()=>n()),t.addEventListener("error",i),document.getElementsByTagName("head")[0].appendChild(t)}})}},453179:function(e,t,n){n.d(t,{Mt:()=>S,NK:()=>E,P6:()=>a,UE:()=>v,ZE:()=>f,Zt:()=>g,_J:()=>d,_S:()=>_,cL:()=>p,iR:()=>y,jL:()=>l,oN:()=>i,oU:()=>T,rM:()=>m,sV:()=>u,sY:()=>c,vj:()=>h,yp:()=>o});var r=n(239728);let i=5e3,a=5e3/r.gJ,o="Pin page",s=["Uploaded by user"],l=(e,t)=>!!t&&!e,d=e=>!!e&&5!==e,u=e=>["email","messages","deep_linking"].includes(e),c=e=>!!e&&"gif"===e,p=({embedSrc:e,embedSubtype:t,embedType:n})=>!!e&&!c(n)&&"pinstory"!==t,m=({link:e,mobileLink:t,trackedLink:n,utmLink:r})=>!t&&!r&&!n&&!e,f=e=>/pin.it/gim.test(e||""),g=({link:e,mobileLink:t,origImageUrl:n,trackedLink:r,utmLink:i})=>t||i||r||e||n||"",h=e=>"string"==typeof e&&(e.includes("#recipe")||e.includes("#:~:text=")),E=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function _(e){for(let t of s)if(e===t)return!1;return!0}function y(e){if(!e)return!1;let{id:t,videos:n}=e;if(t&&n?.id&&n.video_list){let{V_720P:e,V_HLSV4:t,V_HLSV3_MOBILE:r}=n.video_list;if(e&&A(e)||t&&A(t)||r&&A(r))return!0}let r=e.story_pin_data?.pages?.[0]?.blocks;if(r){for(let e of r)if("story_pin_video_block"===e.type&&e?.video)return!0}return!1}function A(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}function S(e){return e?/(?:v\/|V\/|be\/|(?:\?|&)v=|embed\/|shorts\/)([\w-]+)/.exec(e)?.[1]??null:null}function T({isVideo:e,link:t}){return!!e&&!!t&&!!/(youtu(|.)be)/.exec(t)&&!!S(t)}let v=e=>"button"in e&&1===e.button},622481:function(e,t,n){n.d(t,{Z:()=>r});let r=(0,n(667294).createContext)(null)},282803:function(e,t,n){n.d(t,{Z:()=>r});let r=(0,n(667294).createContext)(null)},255957:function(e,t,n){n.d(t,{Z:()=>L});var r=n(281098),i=n(667294),a=n(286036),o=n(457636),s=n(592109),l=n(901360),d=n(392824),u=n(67831),c=n(703393),p=n(735201),m=n(868178),f=n(891631),g=n(594885),h=n(579358),E=n(970773),_=n(361423),y=n(15667),A=n(112114),S=n(603316),T=n(785893);let v=["initial_app_load","client_route_push"],I=(0,s.XV)("PwtSurface"),w="NavigationComplete",b="VisuallyComplete",R=()=>{(0,p._T)()},C=e=>{if(e.metricConfig.constraints.every(t=>e.constraintMap[t])){let n=Math.max(...e.metricConfig.constraints.map(t=>e.constraintMap[t])),{metricConfig:{metricId:r,pwtStaticContext:i,annotateExperiments:a},annotations:s,binaryAnnotations:u,constraintMap:m,startTime:f,imageTimings:g,spans:E,traceId:_}=e;(0,d.L8)(`Report_PWT_Complete_${(0,o.KJ)(r)}`,f,n);let y=(0,c.W)({annotateExperiments:[...a??[]],annotations:s,binaryAnnotations:u,constraintMap:m,endTime:n,imageTimings:g,metricId:r,pwtStaticContext:i,startTime:f,traceId:_,spans:E});try{var t=String(y.binaryAnnotationMap["metricId.surface"].value);let e=performance.getEntriesByType("resource").filter(e=>e.name.includes("i.pinimg")).reduce((e,t)=>{let n=t.name.replace(".jpg","").split("/");return{[n[n.length-1]]:{downloadSize:t.name.split("/")[3].split("x")[0]},...e}},{});[...Array.from(document.getElementsByTagName("img")).map(t=>{let n=t.src.replace(".jpg","").split("/"),r=n[n.length-1];if(e[r]){let n=(0,h.rZ)(t)?.width||1,i=e[r].downloadSize;return{fileName:r,renderedSize:n,downloadedSize:i,ratio:i/n}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}}),...Array.from(document.querySelectorAll('div[role="img"]')).map(t=>{let n=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),r=n[n.length-1];if(e[r]&&t instanceof HTMLDivElement){let n=(0,h.rZ)(t)?.width||1,i=e[r].downloadSize;return{fileName:r,renderedSize:n,downloadedSize:i,ratio:i/n}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}})].forEach(e=>{let{ratio:n,fileName:r,downloadedSize:i}=e;e.ratio>1.05&&(0,l.A9)(`checkImageRatio.${t}`,{count:Math.round(10*n)/10,tags:{fileName:`${i}_${r}`}})})}catch(e){(0,l.H)("image_ratio_check_error",{error:e})}return(0,p._T)(),{...e,result:y,status:"DONE"}}return I(`Remaining constraints: ${e.metricConfig.constraints.filter(t=>!e.constraintMap[t]).join(", ")}`),e},O=(e,t)=>{let{constraint:n,time:r}=t,i=(0,o.KJ)(e.metricConfig.metricId);return _.Z?e.metricConfig.constraints.find(e=>e===n)?e.constraintMap[n]?(I(`constraint "${n}" is already complete.`),(0,l.H)("duplicated_constraint_complete",{constraint:n,action:i}),e):(I(`marking constraint "${n}" as complete ${r||performance.now()}`),r?(0,d.ZP)(`constraint_${n}_is_complete`,r):(0,d.ZP)(`constraint_${n}_is_complete`),C({...e,constraintMap:{...e.constraintMap,[n]:r||_.Z.now()}})):(I(`marked constraint "${n}" is not a required constraint.`),e):((0,l.H)("missing_window_performance",{action:i}),e)},N=(e,t)=>{if(I("dispatch action",t),"INIT_ROUTE"===t.type)return((e,t)=>{let{metricConfig:n,startTime:r,isSampled:i,disablePWTLogging:a}=t;if(a||"TIMING"!==e.status||r===e.startTime||R(),!n)return{status:"DISABLED",metricConfig:null};let s=(0,o.KJ)(n.metricId);if("TIMING"===e.status&&e.startTime===r&&e.constraintMap[w])return(0,l.H)("duplicated_init_route_action",{action:s}),e;if(!a){let e=(0,A.H)();(0,l.A9)(`handler.${s}`,{tags:{handler:e}});let t=void 0!==n.metricId.isAuthenticated&&{tags:{isAuth:n.metricId.isAuthenticated}}||void 0;"Other"===n.pwtStaticContext.browserName&&!1===n.metricId.isAuthenticated&&"initial_app_load"===n.metricId.navigationType?((0,l.A9)(`TIMING.${s}`,{tags:{userAgent:window?.navigator?.userAgent}}),(0,l.A9)(`TIMING.sampled.${s}`,{tags:{userAgent:window?.navigator?.userAgent},sampleRate:.03})):((0,l.A9)(`TIMING.${s}`),(0,l.A9)(`TIMING.sampled.${s}`,{sampleRate:.03})),(0,m.C)({resultLog:`TIMING.${s}`,annotateExperiments:n.annotateExperiments||[],getExperimentGroup:n.pwtStaticContext.getExperimentGroup,options:t})}return O({traceId:(0,p.vc)()||(0,p.ZP)("initial_app_load"===n.metricId.navigationType,n.pwtStaticContext.serverData?.trace_id),status:"TIMING",metricConfig:n,startTime:r,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:i,spans:[]},{constraint:w,disablePWTLogging:a})})(e,t.payload);if("TIMING"!==e.status)return I(`ignoring action due to invalid state ${e.status}`,t),e;switch(t.type){case"ABORT":R();let n={type:"ABORT",reason:t.reason};return{...e,status:"DONE",result:n};case"ANNOTATE":let{name:r}=t.payload;if(!_.Z)return e;let i=_.Z.now();return I(`adding annotation {${r}: ${i}}`),{...e,annotations:{...e.annotations,...{[r]:i}}};case"BINARY_ANNOTATE":let{name:a,value:s,annotationType:d}=t.payload;return I(`adding binary annotation {${a}: ${s}}`),{...e,binaryAnnotations:{...e.binaryAnnotations,...{[a]:{value:s,type:d}}}};case"MARK_CONSTRAINT_COMPLETE":return O(e,t.payload);case"REMOVE_CONSTRAINT":return((e,t)=>{if(!_.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,l.H)("missing_window_performance",{action:t})}I(`removing constraint "${t}"`);let n=e.metricConfig.constraints.filter(e=>e!==t),{[t]:r,...i}=e.constraintMap;return C({...e,constraintMap:i,metricConfig:{...e.metricConfig,constraints:n}})})(e,t.payload);case"SET_SEGMENT":var u=t.payload;if(!_.Z){let t=(0,o.KJ)(e.metricConfig.metricId);(0,l.H)("missing_window_performance",{action:t})}I(`updating pwt segment to "${u}"`);let c={...e.metricConfig.metricId,segment:u};return{...e,metricConfig:{...e.metricConfig,metricId:c}};case"SET_VISUALLY_COMPLETE_RESULT":{let{payload:{imageTimings:n}}=t;if(0===n.length)return R(),{...e,status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}};let r=Math.max(...n.map(e=>e.responseEnd||0));return O({...e,imageTimings:n},{constraint:b,time:r})}case"ADD_SUBSPAN":let{startTime:f}=e,{payload:{name:g,startTime:h,endTime:y,annotations:S,binaryAnnotations:T,parentId:v}}=t;return{...e,spans:[...e.spans,{name:g,id:(0,E.Z)(),startTime:h||f,endTime:y,annotationMap:{...S},binaryAnnotationMap:{...T},parentId:v}]};case"START_SUBSPAN":return{...e,spans:[...e.spans,{name:t.payload.name,id:(0,E.Z)(),startTime:_.Z?_.Z.now():0,endTime:1/0,annotationMap:{...t.payload.annotations},binaryAnnotationMap:{...t.payload.binaryAnnotations},parentId:t.payload.parentId}]};case"STOP_SUBSPAN":let N=e.spans.findIndex(e=>e.name===t.payload.name);return N>-1?(e.spans[N].endTime=_.Z?_.Z.now():0,t.payload.annotations&&(e.spans[N].annotationMap={...e.spans[N].annotationMap,...t.payload.annotations}),t.payload.binaryAnnotations&&(e.spans[N].binaryAnnotationMap={...e.spans[N].binaryAnnotationMap,...t.payload.binaryAnnotations})):(0,l.H)("invalid_subspan_stop_name",{name:t.payload.name}),e;default:let P=(0,o.KJ)(e.metricConfig.metricId);return(0,l.H)("invalid_pwt_surface_action",{action:P}),e}},P=new Set;function L({children:e,...t}){(0,r.Z)("PwtSurface","/app/packages/pwt-logger/PwtSurface.tsx");let n=(0,f.Z)(),s=(e=>{if(!e)return"initial_app_load";switch(e.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}})(n),d=t.measureGridVisuallyComplete?["web_masonry_v2"]:[],c=[...t.annotateExperiments??[],...d],{context:p}=(({surface:e,constraints:t,segment:n,measureGridVisuallyComplete:r,annotateExperiments:o,customEnabledNavigationTypes:s,navigationInfo:{clientNavigation:l,navigationType:d},sampleRate:u})=>{let c=(0,i.useRef)("NOT_SET"),p=(0,g.Z)(),{getState:m,dispatch:f}=((e,t)=>{let n=(0,i.useRef)(t);return{getState:()=>n.current,dispatch:t=>{n.current=e(n.current,t)}}})(N,{status:"DISABLED",metricConfig:null}),h=(0,y.B)();if(c.current!==l&&(c.current=l,p)){let{isAuthenticated:i}=p,a=e&&d&&(s||v).includes(d)?{metricId:{type:"surface",surface:e,navigationType:d,isAuthenticated:i,segment:n},annotateExperiments:o,constraints:[w,...t||[],...r?[b]:[]],pwtStaticContext:p}:null;(0,S.nP)("webapp.pwt_surface.init_route",{tags:{surface:e,navigationType:d,isAuthenticated:i}});let c=!P.has(l);f({type:"INIT_ROUTE",payload:{metricConfig:a,startTime:l?l.time:0,isSampled:!u||Math.random()<u,disablePWTLogging:!c}}),c&&P.add(l)}let E=m();if((0,i.useEffect)(()=>()=>{P.delete(l)},[l]),(0,i.useEffect)(()=>{let e=e=>{f({type:"ABORT",reason:e})};a.Z.onSessionPause(e);let t=window.innerHeight,n=window.innerWidth,r=()=>{let e=Math.abs(window.innerHeight-t),i=Math.abs(window.innerWidth-n),a=window.innerHeight!==t,o=window.innerWidth!==n,s={handler:(0,A.H)(),deviceType:p?.deviceType??"unknown",isAuthenticated:p?.isAuthenticated??"unknown",platform:h.userAgent.platform??"unknown"};if((0,S.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:{...s,heightChanged:a,widthChanged:o}}),a&&(0,S.S0)("webapp.PwtLogger.resizeHeightDelta",e,{sampleRate:1,tags:s}),o&&(0,S.S0)("webapp.PwtLogger.resizeWidthDelta",i,{sampleRate:1,tags:s}),window.removeEventListener("resize",r),p?.deviceType==="phone"&&(!o&&a&&e<=150||!a&&!o)||p?.deviceType==="desktop"&&!a&&!o)return void(0,S.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:{...s,heightChanged:a,widthChanged:o}});f({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",r),()=>{let t=m();I("handling unmount",t),"TIMING"===t.status&&R(),a.Z.removePauseListener(e),window.removeEventListener("resize",r)}},[]),"TIMING"!==E.status||!E.constraintMap[w])return{state:E,context:null};let{startTime:T,metricConfig:C}=E;return{state:E,context:{abort:e=>f({type:"ABORT",reason:e}),addAnnotation:e=>f({type:"ANNOTATE",payload:{name:e}}),addBinaryAnnotation:(e,t,n)=>f({type:"BINARY_ANNOTATE",payload:{name:e,value:t,annotationType:n}}),addSubspan:(e,t,n,r={},i={},a=null)=>f({type:"ADD_SUBSPAN",payload:{name:e,startTime:t,endTime:n,annotations:r,binaryAnnotations:i,parentId:a}}),getId:()=>T,getMetricId:()=>C.metricId,markConstraintComplete:e=>f({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:e,time:_.Z?_.Z.now():0}}),removeConstraint:e=>f({type:"REMOVE_CONSTRAINT",payload:e}),setSegment:e=>f({type:"SET_SEGMENT",payload:e}),setVisuallyCompleteResult:C.constraints.includes(b)?e=>f({type:"SET_VISUALLY_COMPLETE_RESULT",payload:e}):null,startSubspan:(e,t={},n={},r=null)=>f({type:"START_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:r}}),stopSubspan:(e,t={},n={},r=null)=>f({type:"STOP_SUBSPAN",payload:{name:e,annotations:t,binaryAnnotations:n,parentId:r}})}}})({...t,annotateExperiments:c,navigationInfo:{navigationType:s,clientNavigation:n}}),m=(0,u.A)(),h=!!m;return(0,i.useEffect)(()=>{if(h){let e=m?.getMetricId(),t=e?(0,o.KJ)(e):null;(0,l.H)("nested_pwt_surface",{action:t})}},[h]),(0,T.jsx)(u.S,{value:p,children:e})}},67831:function(e,t,n){n.d(t,{A:()=>i,S:()=>r});let{Provider:r,getMaybe:i}=(0,n(729434).Z)("pwtSurfaceContext")},891631:function(e,t,n){n.d(t,{Z:()=>a});var r=n(667294),i=n(622481);function a(){return(0,r.useContext)(i.Z)}},594885:function(e,t,n){n.d(t,{Z:()=>a});var r=n(667294),i=n(282803);function a(){return(0,r.useContext)(i.Z)}},324307:function(e,t,n){n.d(t,{ZP:()=>i,mP:()=>r});let r="â€¦";function i(e,t=80,n=r,a=!1){let o;if(!e)return"";if(e.length<=t)return e;if(" "!==e[t-1]&&" "===e[t]||a)o=e.substring(0,t);else{let n=e.lastIndexOf(" ",t);o=e.substring(0,n)}return(o=o.replace(/[\- _,.<>:;+=*&@~\/\|!]*$/,""))+n}},576087:function(e,t,n){n.d(t,{Z:()=>i});var r=n(869273);let i=({url:e})=>{let t=(0,r.Z)("/");return 0===e.lastIndexOf(t,0)?e.substr(t.length-1):e}},239728:function(e,t,n){n.d(t,{$f:()=>i,Cy:()=>l,DR:()=>r,Fm:()=>s,bR:()=>o,gJ:()=>a,lG:()=>d});let r=1,i=2,a=1e3,o=1e3,s=1e3,l=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),d=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})},821651:function(e,t,n){n.d(t,{r:()=>E,W:()=>h}),n(281098);var r=n(667294),i=n(729434),a=n(821342),o=n(886981),s=n(295317),l=n(121836),d=n(238589),u=n(974705);let c=e=>{let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&("object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?t[(0,u.Z)(n)]=e[n]:t[(0,u.Z)(n)]=c(e[n]));return t},p={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},m=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}};var f=n(785893);let{Provider:g,getMaybe:h}=(0,i.Z)("RoleBasedAccessControlContext"),E=({children:e})=>{let t=(0,a.Z)(),n=!!(t.isAuth&&t.isPartner),{state:i,actions:u,receiveProfiles:h}=(e=>{let[t,n]=(0,r.useReducer)(m,p),i=(({dispatch:e,isEnabled:t,state:n})=>{let{orbacVisibility:i,disableProfileChanger:a,headerVisible:o}=n,s=(0,r.useCallback)(n=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:n})},[t,e]);return{changeProfile:s,toggleORBACVisibility:(0,r.useCallback)(n=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:n??!i})},[t,e,i]),toggleDisableProfileChanger:(0,r.useCallback)(n=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:n??!a})},[t,e,a]),toggleHeaderVisibility:(0,r.useCallback)(n=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:n??!o})},[t,e,o])}})({dispatch:n,isEnabled:e,state:t}),{activeProfile:a,orbacVisibility:o}=t;return(0,r.useEffect)(()=>{let e=(0,d.Nl)().getItem(l.Zo)||!1;e&&n({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,r.useEffect)(()=>{let e=(0,d.Nl)().getItem(l.ig)||!1;e&&n({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,r.useEffect)(()=>{(0,d.Nl)().setItem(l.ig,o)},[o]),(0,r.useEffect)(()=>{(0,d.Nl)().setItem(l.Zo,a)},[a]),{state:t,actions:i,receiveProfiles:(0,r.useCallback)((e,t)=>{n({type:"LOAD_PROFILES",payload:((e,t)=>{let n=[];for(let r in e)r!==t&&n.push({id:r,...c(e[r])});let r=n.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),i=new Map;for(let e of r)i.set(e.id,e);return i})(e,t)})},[n])}})(n),{activeProfile:E,headerVisible:_,profiles:y}=i,A=(0,r.useMemo)(()=>y?Array.from(y.values()):[],[y]),S=(0,s.Z)(A),T=!!t.isAuth&&A.length>0&&S,v=t.isAuth?t.id:"",I=t.isAuth?t.username:"",{changeProfile:w,toggleORBACVisibility:b,toggleDisableProfileChanger:R,toggleHeaderVisibility:C}=u;(0,r.useEffect)(()=>{if(n){if("string"==typeof S)return void w(S);E||w(v)}},[S,v,n,w,E]),(0,r.useEffect)(()=>{n&&(T&&!_&&C(!0),!T&&_&&C(!1))},[C,T,n,_,y]);let{data:O}=(0,o.Z)(n?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),N=O?.profiles,P=(0,r.useMemo)(()=>t&&t.isAuth&&E===t.id?{id:t.id,permissions:["OWNER"],user:{username:I,businessName:t.fullName,imgUrl:t.imageSmallUrl}}:E&&y?y.get(E):void 0,[E,y,t,I]);(0,r.useEffect)(()=>{N&&h(N,v)},[h,N,v]);let L=(0,r.useMemo)(()=>({profiles:A,headerVisible:_,activeProfile:P,changeProfile:w,toggleORBACVisibility:b,toggleDisableProfileChanger:R,toggleHeaderVisibility:C}),[A,_,P,w,b,R,C]);return(0,f.jsx)(g,{value:L,children:e})}},448505:function(e,t,n){n.d(t,{Z:()=>l});var r=n(667294),i=n(274320),a=n(821651),o=n(295317);let s=Object.freeze({}),l=()=>{let{checkExperiment:e}=(0,i.r)(),t=(0,a.W)(),{activeProfile:n}=t||{},l=(0,o.Z)(t?.profiles||[]),{anyEnabled:d}=e("useorbacroutematcher_in_useorbacactingas");return(0,r.useMemo)(()=>d&&!l?s:n&&(n.viewerMeetsMfaRequirement||(n.permissions||[]).includes("OWNER"))?n:s,[d,l,n])}},295317:function(e,t,n){n.d(t,{Z:()=>l});var r=n(616550),i=n(825332),a=n(821342),o=n(506662),s=n(169053);let l=e=>{let t=(0,i.TH)(),n=(0,a.Z)(),l=(0,s.S6)(),d=(0,r.$B)("/:username"),u=d?.params?.username,c=(0,r.$B)("/pin/:id"),p=!!c?.params?.id&&l(c.params.id)?.pinner?.id;if((0,o.ej)(t))return!1;if((0,o.RU)(t)||(0,o.mY)(t))return!0;let m=e.concat(n.isAuth?{user:{username:n.username},id:n.id}:{}).find(e=>{if(!e)return!1;let{user:t,id:n}=e;return(!!t&&"username"in t&&!!t.username&&!!u||!!p&&!!n)&&(t.username===u||p===n)});return!!m&&m.id}},7872:function(e,t,n){n.d(t,{D3:()=>c,DX:()=>d,Fk:()=>r,KY:()=>p,Ms:()=>i,N1:()=>m,_P:()=>l,gJ:()=>a,lJ:()=>s,nl:()=>o,q6:()=>u});let r=(e,t)=>{let n=e&&e.isAuth?e.fullName:"";return e&&t&&t.user&&t.user.businessName&&(n=t.user.businessName),n},i=(e,t)=>{let n=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(n=t.user.username),n},a=(e,t)=>{let n=e&&e.isAuth?e.imageMediumUrl:"";return e&&t&&t.user&&t.user.imgUrl&&(n=t.user.imgUrl),n},o=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),s=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",l=(e,t,n)=>n&&n.user&&t&&t.isAuth&&n.id!==t.id?n.user.merchantId:e.advertiser?.merchant_id,d=(e,t,n)=>n&&n.user&&e.isAuth&&n.id!==e.id?n.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,u=(e,t,n)=>!!(e&&e.isAuth&&n&&n.id&&n.id!==e.id&&n.id===t),c=(e,t,n)=>!!(u(e,t,n)||e&&e.isAuth&&t===e.id),p=(e,t,n)=>c(e,t&&t.owner&&t.owner.id||"",n);function m(e,t,n){return c(e,t?t.id:"",n)}},271597:function(e,t,n){n.d(t,{AC:()=>o,FC:()=>u,FP:()=>l,M0:()=>s,SA:()=>p,Xq:()=>c,Y_:()=>a,o2:()=>i,s0:()=>r,z9:()=>d});let r=44,i=40,a=49,o=69,s=236,l=157,d=320,u=213,c=7,p=["US","GB","CA","FR","DE","AT","CH","IT","ES","AU","BR","NL","MX"]},907586:function(e,t,n){n.d(t,{_9:()=>a,o6:()=>r,tg:()=>i});let r=20,i=24,a=20},80245:function(e,t,n){n.d(t,{By:()=>u,IT:()=>d,N6:()=>i,br:()=>a,jq:()=>s,lU:()=>l,tq:()=>o});var r=n(686319);let i=(e,t)=>({type:"UPDATE_CURRENT_SEARCH",payload:{query:e,scope:t}}),a=(e,t)=>({type:"UPDATE_RECENT_SEARCHES",payload:{query:e,scope:t}}),o=e=>({type:"UPDATE_RECENT_SEARCHES_BATCH",payload:{data:e}}),s=(e,t,n)=>({type:"UPDATE_TYPEAHEAD_CACHE",payload:{items:e,term:t,recent_queries_tags:n}}),l=(e,t,n)=>i=>{(0,r.Z)({url:"/v3/search/recent/",method:"DELETE",data:{vertical:e}}).then(t,n),i("PERSONAL"===e?{type:"CLEAR_RECENT_PERSONAL_SEARCHES"}:{type:"CLEAR_RECENT_SEARCHES"})},d=(e,t,n,i,a)=>o=>{n||(0,r.Z)({url:"/v3/search/recent/",method:"DELETE",data:{query:e,vertical:t}}).then(i,a),o("PERSONAL"===t?{type:"CLEAR_RECENT_PERSONAL_SEARCH",payload:{query:e}}:{type:"CLEAR_RECENT_SEARCH",payload:{query:e}})},u=e=>t=>{t({type:"RELOAD_VISUAL_SEARCH_ANNOTATIONS",payload:{pinId:e}})}},404005:function(e,t,n){n.d(t,{Z:()=>f});var r=n(281098),i=n(20256),a=n(121836),o=n(588367),s=n(15667),l=n(238589),d=n(351222),u=n(647709),c=n(785893);let p=new i.Ry(1),m=new i.H3([p]);function f({children:e,hideOnScroll:t=!1,fixedHeaderRefHeight:n,paddingY:i=0,hasBorder:p=!1,isTransparentBackground:f=!1}){(0,r.Z)("SearchFixedHeader","/app/www/search/SearchFixedHeader.tsx");let g=(0,u.ZP)(),{isAuthenticated:h}=(0,s.B)(),E="true"===l.ZP.getItem(a.m5);return(0,c.jsx)(o.default,{hasBorder:p,height:t?n:void 0,hideOnScroll:t,isTransparentBackground:f,overrideTop:"tablet"===g||E?0:(0,d.ZP)(g,h),paddingY:i,zIndex:m,children:e})}},339618:function(e,t,n){n.d(t,{Z:()=>r});function r({appliedFilters:e,article:t,autoCorrectionDisabled:n,filters:r,journeyDepth:i,query:a,scope:o,selectedOneBarModules:s,sourceId:l,sourceModuleId:d,topPinIds:u}){let c=[o,a,r,e,t,l,d,i,u].map(e=>e??"").join(":");return n&&(c+=":auto-correction-disabled"),s&&(c+=`:${s}`),c}},100785:function(e,t,n){n.d(t,{V:()=>a,q:()=>o});var r=n(378888),i=n(339618);let a=e=>{let{category:t,domains:n,price_max:i,price_min:a}=(0,r.mB)(e);return[t,n,i,a].map(e=>e??"").join("-")},o=(e,t)=>(0,i.Z)({appliedFilters:a(e),article:(0,r.mB)(e).b_id??"",autoCorrectionDisabled:(0,r.mB)(e).auto_correction_disabled??"",filters:(0,r.mB)(e).filters??"",journeyDepth:(0,r.mB)(e).journey_depth??"",query:(0,r.mB)(e).q??"",scope:t,selectedOneBarModules:(0,r.mB)(e).selected_one_bar_modules,sourceId:(0,r.mB)(e).source_id??"",sourceModuleId:(0,r.mB)(e).source_module_id??"",topPinIds:(0,r.mB)(e).top_pin_ids??""})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/67529-a4b34af2d9abd0ca.mjs.map